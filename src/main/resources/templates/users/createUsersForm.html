<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{/layout/layout_admin :: main-fragment(
                                                ~{:: title},
                                                ~{:: #css-resources},
                                                ~{:: #js-resources},
                                                ~{:: #main-content}
                                               )}" lang="vi">

<head>
    <title>Danh sách tài khoản người dùng</title>

    <th:block id="css-resources">
    </th:block>
</head>
<body>
<main id="main-content">
    <!-- Breadcrumb -->
    <div class="row">
        <div class="col-12">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/admin">Dashboard</a></li>
                <li class="breadcrumb-item active">Danh sách user</li>
            </ol>
        </div>
    </div>


    <div class="row" style="margin-top: 50px" ;>
    <div class="col-lg-3 text-center"></div>
    <div class="col-lg-6">
        <div class="card">
            <div class="card-header text-center">
                <th:block th:if="${account_type =='customer_corporate'}">Register new Corporate Customer Account</th:block>
                <th:block th:if="${account_type =='customer_retail'}">Register new Retail Customer Account</th:block>
                <th:block th:if="${account_type =='provider'}">Register new Provider Account</th:block>
            </div>
            <div class="card-body">

                <form th:action="@{${registerAction}}" th:object="${users}" method="POST">

                    <div th:if="${registrationError != null}" class="alert alert-danger">
                        <p th:text="${registrationError}"></p>
                    </div>

                    <div class="form-group">
                        <label for="userName">Username</label>

                        <input type="text" class="form-control" th:classappend="${#fields.hasErrors('userName') ? 'is-invalid' :''}" th:field="*{userName}" placeholder="jkwowalski">
                        <div th:if="${#fields.hasErrors('userName')}" class="invalid-feedback">
                           <p th:errors="*{userName}"></p>
                        </div>

                    </div>

                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" class="form-control" th:classappend="${#fields.hasErrors('password') ? 'is-invalid' :''}" th:field="*{password}" placeholder="password">
                        <div th:if="${#fields.hasErrors('password')}" class="invalid-feedback">
                            <p th:errors="*{password}"></p>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="matchingPassword">Repeat</label>
                        <input type="password" class="form-control" th:classappend="${#fields.hasErrors('matchingPassword') ? 'is-invalid' :''}" th:field="*{matchingPassword}"
                               placeholder="reapeat password">
                        <div th:if="${#fields.hasErrors('matchingPassword')}" class="invalid-feedback">
                            <p th:errors="*{matchingPassword}"></p>
                        </div>

                    </div>

                    <th:block th:if="${account_type =='customer_corporate'}">
                        <div class="form-group">
                            <label for="companyName">Company Name</label>
                            <input type="text" class="form-control" th:classappend="${#fields.hasErrors('companyName') ? 'is-invalid' :''}" th:field="*{companyName}"
                                   placeholder="company name">
                            <div th:if="${#fields.hasErrors('companyName')}" class="invalid-feedback">
                                <p th:errors="*{companyName}"></p>
                            </div>

                        </div>

                        <div class="form-group">
                            <label for="vatNumber">VAT number</label>

                            <input type="text" class="form-control" th:classappend="${#fields.hasErrors('vatNumber') ? 'is-invalid' :''}" th:field="*{vatNumber}"
                                   placeholder="vat number">
                            <div th:if="${#fields.hasErrors('vatNumber')}" class="invalid-feedback">
                                <p th:errors="*{vatNumber}"></p>
                            </div>

                        </div>

                    </th:block>

                    <div class="form-group">
                        <label th:if="${account_type =='customer_corporate'}" for="firstName">Contact person first
                            name</label>
                        <label th:if="${account_type =='customer_retail' or account_type =='provider'}"
                               for="firstName">First
                            name</label>
                        <input type="text" class="form-control" th:classappend="${#fields.hasErrors('firstName') ? 'is-invalid' :''}" th:field="*{firstName}"  placeholder="Jan">
                        <div th:if="${#fields.hasErrors('firstName')}" class="invalid-feedback">
                            <p th:errors="*{firstName}"></p>
                        </div>

                    </div>

                    <div class="form-group">
                        <label th:if="${account_type =='customer_corporate'}" for="lastName">Contact person last
                            name</label>
                        <label th:if="${account_type =='customer_retail' or account_type =='provider'}"
                               for="lastName">Last
                            name</label>
                        <input type="text" class="form-control" th:classappend="${#fields.hasErrors('lastName') ? 'is-invalid' :''}" th:field="*{lastName}" placeholder="Kowalski">
                        <div th:if="${#fields.hasErrors('lastName')}" class="invalid-feedback">
                            <p th:errors="*{lastName}"></p>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="email">E-mail</label>

                        <input type="text" class="form-control" th:classappend="${#fields.hasErrors('email') ? 'is-invalid' :''}" th:field="*{email}" placeholder="jkowalski@example.com">
                        <div th:if="${#fields.hasErrors('email')}" class="invalid-feedback">
                            <p th:errors="*{email}"></p>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="phone">phone</label>

                        <input type="text" class="form-control" th:classappend="${#fields.hasErrors('phone') ? 'is-invalid' :''}" th:field="*{phone}"
                               placeholder="505162073">
                        <div th:if="${#fields.hasErrors('phone')}" class="invalid-feedback">
                            <p th:errors="*{phone}"></p>
                        </div>

                    </div>

                    <div class="form-group">
                        <label for="address">address</label>

                        <input type="text" class="form-control" th:classappend="${#fields.hasErrors('address') ? 'is-invalid' :''}" th:field="*{address}" placeholder="ul. Adama Mickiewicza 1">
                        <div th:if="${#fields.hasErrors('address')}" class="invalid-feedback">
                            <p th:errors="*{address}"></p>
                        </div>
                    </div>

                    <th:block th:if="${account_type =='provider'}">
                        <div class="form-group">
                            <p class="text-primary">retail customer target</p>
                            <p class="text-info">corporate customer target</p>
                            <label>Works:</label>
                            <ul>
                                <li th:each="work : ${allWorks}">
                                    <input type="checkbox" th:field="*{works}" th:value="${work.id}" />
                                    <label th:for="${#ids.prev('works')}"
                                           th:text="${work.name}" th:classappend="${work.targetCustomer=='retail'} ? text-primary : text-info">French lesson</label>
                                </li>
                            </ul>
                        </div>
                    </th:block>

                    <button type="submit" class="btn btn-success">Register</button>


            </div>
            </form>
        </div>
    </div>
</div>
<div class="col-lg-3 text-center"></div>
</div>
</main>

<th:block id="js-resources">
    <!-- List js -->
    <script th:src="@{/adminlte/plugins/list/list.min.js}"></script>
    <!-- main js -->
    <script th:src="@{/script/admin/manage-user.js}"></script>
</th:block>
</body>
</html>
